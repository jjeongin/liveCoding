<link rel="shortcut icon" type="image/png" href="https://cdn.glitch.com/597fe374-3d18-46a5-b99c-ceff1f8ffd79%2Ffavicon.png?1530891352785" />
<script>
    class Strudel extends HTMLElement {
  constructor() {
    super();
  }
  connectedCallback() {
    setTimeout(() => {
      const code = (this.innerHTML + '').replace('<!--', '').replace('-->', '').trim();
      const iframe = document.createElement('iframe');
      const src = `https://strudel.tidalcycles.org/#${encodeURIComponent(btoa(code))}`;
      // const src = `http://localhost:3000/#${encodeURIComponent(btoa(code))}`;
      iframe.setAttribute('src', src);
      iframe.setAttribute('width', window.outerWidth);
      iframe.setAttribute('height', window.outerHeight);
      this.appendChild(iframe);
    });
  }
}
customElements.define('strudel-repl', Strudel);
</script>
<strudel-repl>
  <!--
await initHydra()
let pattern = saw.range(3,0).cpm(23.75)

osc(200,0.01,1).rotate(1).layer(osc(30,0,1).luma(0.2,.2).color(0,0,0,1))
  .layer(osc(30,0,1).luma(0.5,0.01))
  .modulate(noise(H(pattern),.1)).out(o0)

samples({
  feel: ['feel/BD 04 d.wav',
         'feel/HH 003b.wav',
         'feel/hihat029a.wav',
         'feel/Sd 139.wav',
         'feel/Sd 180.wav',
         'feel/Sd 223.wav',
         'feel/sub.wav'],
         casio: 'casio/low.wav',
}, 'https://raw.githubusercontent.com/tidalcycles/Dirt-Samples/master/');

stack(
s("feel:6 feel:5*8? feel:3 feel:1").room("0.9").size("0.3").speed(saw.range(8, 0.5).slow(4)).gain("1.5")
  ,
 sound("casio:1*16").speed(saw.range(1,1.5).slow(4)).gain(rand).room("0.9").size("0.5").note(30)
).cpm(23.75)
      -->
</strudel-repl>
